(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var u=a[i];0!==n[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("85ec"),n=a.n(r);n.a},"07a6":function(e,t,a){e.exports=a.p+"img/login.8bffff72.png"},"12a5":function(e,t,a){},"50a6":function(e,t,a){"use strict";var r=a("b9c0"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("link",{attrs:{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}}),a("router-view")],1)},s=[],o=(a("034f"),a("2877")),i={},u=Object(o["a"])(i,n,s,!1,null,null,null),c=u.exports,l=(a("45fc"),a("8aa5")),p=a.n(l),d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("header",[a("h1",[e._v("Togehter")]),a("h4",[e._v(". find together . change together")]),a("p",[e._v("Signd in as "+e._s(e.user.username))])]),a("div",{staticClass:"posts"},e._l(e.allPosts,(function(t,r){return a("div",{key:r,staticClass:"post",class:{me:t.user.uid===e.user.uid}},[a("span",{staticClass:"message"},[e._v(e._s(t.message))]),a("span",{staticClass:"info"},[e._v(e._s(t.user.username))])])})),0),a("form",{staticClass:"messageContainer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.currentMessage,expression:"currentMessage"}],attrs:{type:"text",placeholder:"Write post..."},domProps:{value:e.currentMessage},on:{input:function(t){t.target.composing||(e.currentMessage=t.target.value)}}}),a("button",{attrs:{type:"submit"},on:{click:function(t){return e.send()}}},[a("i",{staticClass:"material-icons"},[e._v("send")])])]),a("a",{on:{click:function(t){return e.logout()}}},[e._v("Log out")])])},f=[],g=(a("4de4"),a("07ac"),a("ac1f"),a("5319"),{name:"Home",data:function(){return{user:{email:"null",username:"null",uid:p.a.auth().currentUser.uid},currentMessage:"",allPosts:[]}},methods:{logout:function(){var e=this;p.a.auth().signOut().then((function(t){return e.$router.replace("/login")}))},send:function(){if(""!==this.currentMessage){var e=p.a.database().ref().child("post").push().key,t={message:this.currentMessage,timestamp:(new Date).getTime(),user:this.user,key:e};p.a.database().ref("posts/".concat(e)).update(t),p.a.database().ref("user/".concat(this.user.uid,"/posts")).update({message:t.message,key:t.key,timestamp:t.timestamp}),this.currentMessage=""}}},created:function(){var e=this,t=(new Date).getTime(),a=p.a.database().ref("posts");a.on("value",(function(a){e.allPosts=Object.values(a.val()).filter((function(e){return e.timestamp!=t}))})),p.a.database().ref("user/".concat(this.user.uid)).once("value").then((function(t){e.user.username=t.val().username,e.user.email=t.val().email}))}}),h=g,v=(a("cccb"),Object(o["a"])(h,m,f,!1,null,null,null)),b=v.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"login"},[r("img",{attrs:{src:a("07a6"),width:"200",alt:""}}),r("p",[e._v("Let's log in to find together")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("br"),r("button",{attrs:{type:"submit"},on:{click:e.login}},[e._v("Sign in")]),r("p",{directives:[{name:"show",rawName:"v-show",value:e.err,expression:"err"}]},[e._v("Something went wrong. Please check your entries.")]),r("br"),r("span",[e._v("You don't have an account ? Let's "),r("router-link",{attrs:{to:"/sign-up"}},[e._v(" create one ")])],1)])},y=[],_={name:"Login",data:function(){return{email:"",password:"",err:!1}},methods:{login:function(){var e=this;p.a.auth().signInWithEmailAndPassword(this.email,this.password).then((function(t){return e.$router.replace("/home")}),(function(t){return e.err=!0}))}}},P=_,x=(a("8ce4"),Object(o["a"])(P,w,y,!1,null,"364d8ebf",null)),k=x.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"sign-up"},[r("img",{attrs:{src:a("07a6"),width:"200",alt:""}}),r("p",[e._v("Let's sign up to find together")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("br"),r("button",{attrs:{type:"submit"},on:{click:e.signUp}},[e._v("Sign up")]),r("p",{directives:[{name:"show",rawName:"v-show",value:e.err,expression:"err"}]},[e._v("Something went wrong. Please check your entries.")]),r("br"),r("span",[e._v("You have an account ? Let's "),r("router-link",{attrs:{to:"/login"}},[e._v("log in")])],1)])},j=[],S={name:"sign-up",data:function(){return{email:"",password:"",username:"",err:!1}},methods:{signUp:function(){var e=this;p.a.auth().createUserWithEmailAndPassword(this.email,this.password).then((function(t){p.a.database().ref("user/".concat(t.user.uid)).update({username:e.username,email:e.email,posts:[]}),e.$router.replace("/home")}),(function(t){return e.err=!0}))}}},C=S,M=(a("50a6"),Object(o["a"])(C,O,j,!1,null,"626488e9",null)),N=M.exports;r["a"].use(d["a"]);var q=new d["a"]({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:k},{path:"/sign-up",name:"SignUp",component:N},{path:"/home",name:"Home",component:b,meta:{requiresAuth:!0}}]});q.beforeEach((function(e,t,a){var r=p.a.auth().currentUser,n=e.matched.some((function(e){return e.meta.requiresAuth}));console.log(r||"Not logged in!"),n&&!r?a("login"):!n&&r?a("home"):a()}));var E=q,L=a("59ca"),T=a.n(L);r["a"].config.productionTip=!1;var U="",$={apiKey:"AIzaSyBpupHTLfgOcJaapDqCdwJXNqm6bpPnlp4",authDomain:"together-dbed1.firebaseapp.com",databaseURL:"https://together-dbed1.firebaseio.com",projectId:"together-dbed1",storageBucket:"together-dbed1.appspot.com",messagingSenderId:"172668297160",appId:"1:172668297160:web:50deee8e8cdc0380392afd",measurementId:"G-FS8J22CDTW"};T.a.initializeApp($),T.a.auth().onAuthStateChanged((function(){U||new r["a"]({router:E,render:function(e){return e(c)}}).$mount("#app")}))},"5ced":function(e,t,a){},"85ec":function(e,t,a){},"8ce4":function(e,t,a){"use strict";var r=a("12a5"),n=a.n(r);n.a},b9c0:function(e,t,a){},cccb:function(e,t,a){"use strict";var r=a("5ced"),n=a.n(r);n.a}});
//# sourceMappingURL=app.53fbb7b5.js.map